/* *****************************************************************************
Copyright (c) niu tech. All rights reserved. 
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0 
 
THIS CODE IS PROVIDED *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, 
MERCHANTABLITY OR NON-INFRINGEMENT. 
 
See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */

(function(){if(!window.console){window.console={log:function(){}}}hashCode=function(c){var d=0,b,a;if(c.length==0){return d}for(a=0;a<c.length;a++){b=c.charCodeAt(a);d=(d<<5)-d+b;d=d&d}return d};load=function(a){var b;if(window.XMLHttpRequest){b=new XMLHttpRequest()}else{if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLHTTP")}else{return false}}b.open("GET",a,false);if(b.overrideMimeType){b.overrideMimeType("text/plain")}b.send(null);if(b.status==200){return b.responseText}return false};compile=function(){var d={source:"",Write:function(e){this.source+=e},WriteLine:function(e){this.source+=e+"\n"},Close:function(){}};var b=new TypeScript.TypeScriptCompiler(d);var j=document.getElementsByTagName("script");var g=document.getElementsByTagName("body")[0];var f,a=[],c;for(f=0;f<j.length;f++){if(j[f].type=="text/typescript"){if(j[f].src){a.push(load(j[f].src))}else{a.push(j[f].innerHTML)}}}if(a.length==0){return}try{if(window.sessionStorage&&sessionStorage.getItem("typescript"+hashCode(a.join("")))){d.source=sessionStorage.getItem("typescript"+hashCode(a.join("")))}else{b.parser.errorRecovery=true;b.setErrorCallback(function(m,e,i,l){console.log("Compilation error: ",i,"\n Code block: ",l," Start position: ",m," Length: ",e)});for(f=0;f<a.length;f++){b.addUnit(a[f],"")}b.emit(false,function k(e){return d});if(window.sessionStorage){sessionStorage.setItem("typescript"+hashCode(a.join("")),d.source)}}c=document.createElement("script");c.type="text/javascript";c.innerHTML="//Compiled TypeScript\n\n"+d.source;g.appendChild(c)}catch(h){console.log("Fatal error: ",h)}};compile()})();